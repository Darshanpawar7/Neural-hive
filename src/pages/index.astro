---
import BaseLayout from "../layouts/BaseLayout.astro";
import PostCard from "../components/PostCard.astro";

const modules = import.meta.glob("../content/posts/*.md", { eager: true }) as any;
const posts = Object.values(modules)
  .map((m: any) => m.frontmatter)
  .sort((a: any, b: any) => new Date(b.date).getTime() - new Date(a.date).getTime());
---

<BaseLayout title="ML Mondays">
  <div class="star-background">
    <div class="stars"></div>
    <div class="twinkling"></div>
  </div>

  <div class="relative z-10">
    <div class="min-h-screen flex flex-col">
      <div class="flex justify-between items-center w-full mt-10">
        <img 
          src="/uploads/banner.png" 
          class="w-full max-w-4xl mx-auto select-none" 
          draggable="false" 
          alt="Neural Hive Honeycomb"
        />
      </div>

      <div class="max-w-4xl mx-auto mt-28 px-4 text-center flex flex-col items-center">
        <h1 class="text-5xl md:text-6xl font-black tracking-tighter uppercase mb-8 bg-clip-text text-transparent bg-gradient-to-r from-black to-gray-600 dark:from-white dark:to-gray-400 no-underline decoration-transparent select-none">
          ML Mondays
        </h1>

        <p class="text-xl leading-relaxed opacity-90 dark:text-gray-200 max-w-2xl mx-auto mt-12">
          ML Mondays is a curated space for learning, curiosity, and thoughtful writing
          around Machine Learning and Artificial Intelligence.
          <br /><br />
          Whether you're just beginning your ML journey or diving deep into advanced ideas,
          our goal is to make complex concepts clear, meaningful, and inspiring — one Monday at a time.
        </p>
      </div>
      
      <div class="mt-auto pb-10 text-center animate-bounce opacity-40">
        <p class="text-xs uppercase tracking-widest dark:text-white">Scroll to read</p>
        <span class="dark:text-white">↓</span>
      </div>
    </div>

    <hr class="mb-20 border-gray-200 dark:border-gray-800" />

    <div class="max-w-5xl mx-auto space-y-12 pb-32 px-4">
      {posts.map((post: any) => (
        <article class="group relative p-6 md:p-8 rounded-2xl border border-gray-200/50 dark:border-white/10 bg-white/50 dark:bg-white/[0.02] backdrop-blur-sm transition-all duration-500 hover:border-yellow-500/50 hover:bg-white/80 dark:hover:bg-white/[0.05] hover:shadow-[0_0_30px_-10px_rgba(234,179,8,0.3)]">
          <div class="grid grid-cols-1 md:grid-cols-12 gap-8 items-start">
            <div class="md:col-span-4 overflow-hidden rounded-xl border border-gray-200 dark:border-gray-800">
              <img 
                src={post.hero_image} 
                class="w-full h-48 md:h-full object-cover transition-transform duration-700 group-hover:scale-110" 
                alt={post.title}
              />
            </div>

            <div class="md:col-span-8 flex flex-col h-full">
              <div class="mb-2 flex items-center gap-3 text-[10px] uppercase tracking-[0.2em] font-mono opacity-60 dark:text-white">
                <span>{post.date}</span>
                <span class="w-1 h-1 rounded-full bg-yellow-500"></span>
                <span>{post.read_time}</span>
              </div>

              <h2 class="text-2xl md:text-3xl font-bold mb-4 group-hover:text-yellow-600 dark:group-hover:text-yellow-500 transition-colors duration-300">
                <a href={`/posts/${post.slug}`} class="no-underline">{post.title}</a>
              </h2>

              <p class="text-base leading-relaxed opacity-70 dark:text-gray-300 line-clamp-3 mb-6">
                {post.description}
              </p>

              <div class="mt-auto">
                <a href={`/posts/${post.slug}`} class="inline-flex items-center gap-2 text-sm font-bold uppercase tracking-wider group/link no-underline">
                  <span class="relative">
                    Read More
                    <span class="absolute -bottom-1 left-0 w-0 h-[2px] bg-yellow-500 transition-all duration-300 group-hover/link:w-full"></span>
                  </span>
                  <span class="transition-transform duration-300 group-hover/link:translate-x-2">→</span>
                </a>
              </div>
            </div>
          </div>
        </article>
      ))}
    </div>
  </div>
</BaseLayout>

<style>
  h1 {
    text-decoration: none !important;
    -webkit-text-decoration: none !important;
  }

  .star-background {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1; 
    background: transparent; 
    pointer-events: none;
  }

  :global(.dark) .star-background {
    background: #010409; /* Using the same dark shade as About page */
  }

  .stars, .twinkling {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
    display: none;
  }

  :global(.dark) .stars, :global(.dark) .twinkling {
    display: block;
  }

  .stars {
    background: #000 url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/1231630/stars.png) repeat top center;
    z-index: -2;
  }

  .twinkling {
    background: transparent url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/1231630/twinkling.png) repeat top center;
    z-index: -1;
    animation: move-twink-back 400s linear infinite;
  }

  @keyframes move-twink-back {
    from { background-position: 0 0; }
    to { background-position: -10000px 5000px; }
  }
</style>
